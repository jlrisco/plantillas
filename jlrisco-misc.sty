\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{tikz}

% Configurar colores y fuentes
\hypersetup{colorlinks,linkcolor=.}
\setbeamercolor{frametitle}{fg=orange}
\setbeamercolor{block title}{fg=blue}
\setbeamercolor{section title}{fg=orange}
\setbeamercolor{subsection title}{fg=orange}
\setbeamercolor{section in toc}{fg=black}
\setbeamercolor{subsection in toc}{fg=orange}
\setbeamertemplate{navigation symbols}{}
\setbeamercolor{itemize item}{fg=black}
\setbeamercolor{enumerate item}{fg=black}
\setbeamercolor{itemize subitem}{fg=black}
\setbeamercolor{enumerate subitem}{fg=black}
\setbeamercolor{item projected}{fg=black, bg=black}
\setbeamercolor{title}{fg=black}

% Código fuente
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\usepackage{listings}
\lstset{
  basicstyle=\ttfamily\footnotesize,
  showstringspaces=false,
  keywordstyle=\color{blue}\ttfamily,          % keyword style
  commentstyle=\color{dkgreen}\ttfamily,       % comment style
  stringstyle=\color{mauve}\ttfamily,         % string literal style
  numbersep=5pt,                          		% How far are line-numbers from code
  frame=none,                             		% A frame around the code
  tabsize=2,                              		% Default tab size
  captionpos=b,                           		% Caption-position = bottom
  breaklines=true,                        		% Automatic line breaking?
  showspaces=false,                       		% Dont make spaces visible
  keepspaces=true,
  showtabs=false,                         		% Dont make tabls visible
  columns=fullflexible,                    		% Column format
  inputencoding=utf8x,
  extendedchars=true,
  literate={ñ}{{\~n}}1 {á}{{\'a}}1 {ã}{{\~a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1,
}

\lstdefinelanguage{opl}
{
  morekeywords={dvar, float+, maximize, minimize, subject to},
  sensitive=false,
  morestring=[b]",
  morecomment=[l]//,
}

\lstdefinelanguage{oml}
{
  morekeywords={Decisions, Reals, Infinity, Goals, Maximize, Constraints},
  sensitive=false,
  morestring=[b]",
  morecomment=[l]//,
}

% Configurar el formato del título del frame
\setbeamertemplate{frametitle}
{
  \leavevmode%
  \vspace{0.25em}
  \hbox{%
    % Configuración del título de la sección a la izquierda en la primera mitad
    \makebox[0.35\paperwidth][l]{%
      \usebeamerfont{section title}\insertsectionhead
    }%
    % Configuración del título de la subsección a la izquierda en la segunda mitad
    \makebox[0.65\paperwidth][l]{%
      \usebeamerfont{subsection title}\insertsubsectionhead
    }%
  }
}

% Configurar la plantilla del pie de página
%\makeatletter
\setbeamertemplate{footline}
{
  \leavevmode%
  \hbox{%
  % Comprobar si es la primera diapositiva
    \begin{beamercolorbox}[wd=0.13\paperwidth,ht=2.25ex,dp=1ex,left]{author in head/foot}%
      \includegraphics[height=0.75cm]{core/logo-ucm.png} % Ajusta el tamaño del logo según sea necesario
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=0.80\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
      \vbox{
        \hbox to \hsize{%
          \color{orange}\rule[1mm]{0.95\hsize}{0.5mm} % línea superior más gruesa
          \hfill
          \color{black}\insertframenumber{} % número de página
          \vspace{-2mm} % ajuste vertical
        }
        \hbox to \hsize{%
          \color{orange}\rule[0.5mm]{0.95\hsize}{0.25mm} % línea inferior más delgada
      
        }
        \hbox to \hsize{%
          \hfil \insertauthor \hfil
        }
        \vspace{1mm} % ajuste vertical
        \hbox to \hsize{%
          \hfil \insertshortinstitute \hfil
        }
      }
    \end{beamercolorbox}%
    \begin{beamercolorbox}[wd=.07\paperwidth,ht=2.25ex,dp=1ex,right]{author in head/foot}%
      \includegraphics[height=0.75cm]{core/logo-uned.png} % Ajusta el tamaño del logo según sea necesario
    \end{beamercolorbox}%
  }%
  \vskip0pt%
}
%\makeatother

% Dibujar un cuadrado transparente con borde azul en el fondo de la diapositiva
\usebackgroundtemplate{%
  \begin{tikzpicture}[remember picture,overlay]
    \draw[blue, line width=1pt, rounded corners=5pt] % Cambia el grosor y las esquinas redondeadas según sea necesario
      ([xshift=15pt,yshift=24pt]current page.south west) rectangle
      ([xshift=-15pt,yshift=-30pt]current page.north east); % Ocupa todo el cuerpo de la diapositiva menos la cabecera y el pie de página
  \end{tikzpicture}%
}

% Índice al inicio de cada subsección
\AtBeginSubsection[]{
  \begin{frame}{Índice}
    \tableofcontents[sectionstyle=show/shaded, subsectionstyle=show/shaded, subsubsectionstyle=show/shaded/hide]
  \end{frame}
}
